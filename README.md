# Robowoo

Provides a Robokassa gateway for WooCommerce. Supports russian law 54-FZ

## Описание ##

RoboWoo расширяет платежные способности WooCommerce добавлением шлюза Робокассы. Плагин поддерживает Робочеки - нововведения, обеспечивающие соблюдение закона 54-ФЗ об электронных чеках. 

Кроме основной работы с Робокассой плагин позволяет: 
* Выбирать стили кнопок оплаты и отмены
* Работать в тестовом режиме (без настоящей оплаты) Робокассы
* Выбирать алгоритм формирования хэша подписи
* Включать / выключать передачу информацию о составе заказа, налогах и налогооблажении в Робокассу
* Включать / выключать передачу информации о стоимости доставки в Робокассу
* Выбирать систему налогооблажения для передачи в Робокассу
* Выбирать размер ставки НДС для товаров в заказе
* Выбирать способ расчета: 100% предоплата, аванс, кредит и пр.
* Выбирать предмет расчета: товар, подакцизный товар, услуга, работа, агентское вознаграждение и пр.

## Настройка ##

После активации плагин управляется через настройки платежей WooCommerce (WooCommerce - Настройки - Платежи - Робокасса) 

Настройка платежей состоит из двух этапов. 

### 1. Настройка Робокассы ###

В технических настройках магазина в Робокассе необходимо прописать следующие параметры: 
* Result URL: http://[адрес_магазина]/?wc-api=wc_robokassa&robokassa=result
* Success URL: http://[адрес_магазина]/?wc-api=wc_robokassa&robokassa=success
* Fail URL: http://[адрес_магазина]/?wc-api=wc_robokassa&robokassa=fail

Выбрать метод отсылки данных везде: POST

### 2. Настройка плагина ###

В настройках плагина (WooCommerce - Настройки - Платежи - Робокасса) ввести: 
* Идентификатор магазина из технических настроек магазина Робокассы
* Пароль #1, Пароль #2 из технических настроек магазина Робокассы
* Алгоритм расчета хеша из технических настроек магазина Робокассы

Если у вас в Робокассе тарифы Облачное решение, Кассовое решение или решение Робочеки, то необходимо передавать информацию о составе заказа и НДС на товары:
* Поставьте флажок "Передавать информацию о корзине"
* Выберите формат НДС для товаров в заказе
* Только если у вас используется несколько типов налогооблажения в Робокассе, поставьте флажок "Передавать информацию о системе налогообложения" и выберите систему налогооблажения

Если плагин тестируется, то необходимо поставить флажок "Тестовый режим" и вводить Пароль #1, Пароль #2, Алгоритм расчета хеша из раздела "Параметры проведения тестовых платежей" технических настроек магазина Робокассы. 

При необходимости введите css-классы, которые стилизуют кнопки оплаты и отмены оплаты. 

Если необходимо, чтобы плагин вел журнал работы с клиентом и Робокассой, поставьте флажок "Записывать все действия в журнал"

## Установка ##

1. Распакуйте архив и/или скопируйте папку "robowoo" в каталог "/wp-content/plugins/" вашего сайта.
2. Активируйте плагин в меню 'Плагины' WordPress.
3. Плагин управляется через настройки платежей WooCommerce (WooCommerce - Настройки - Платежи - Робокасса) 

## Изменения ##

### 1.0.4 ###
* Плагин корректно реагирует, когда Робокасса отправляет неправильный номер заказа.

### 1.0.3 ###
* Добавлена совместимость с новым протоколом формата фискальных документов (ФФД 1.05)
* Добавлена возможность выбирать способ расчета 
* Добавлена возможность выбирать тип предмета расчета

### 1.0.2 ###
* Подтверждена совместимость с WordPress 5.0
* Добавлена возможность ставить доставку в чеки

### 1.0.1 ###
* Исправлена небольшая ошибка

### 1.0 ###
* Релиз плагина